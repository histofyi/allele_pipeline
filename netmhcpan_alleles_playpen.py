
sql_query = "select 100.0 * COUNT(*) / (SELECT COUNT(*) FROM peptides where netmhcpan='True') as percentage, allele from peptides where netmhcpan='True' group by allele having percentage >= 0.7209100384437158 order by percentage desc"
query_date = "2024-04-23"

csv = """7.209100384437158,hla_a_02_01
5.463872555481117,hla_b_07_02
5.021817386235003,hla_b_57_01
4.9229698823586965,hla_a_29_02
3.9630592446333033,hla_b_40_02
3.950774649705591,hla_b_15_01
3.227233751109215,hla_a_24_02
2.9126720216991604,hla_a_02_07
2.7753400345979853,hla_b_27_05
2.605693040043159,hla_c_05_01
2.5380190547112917,hla_b_27_09
2.3492113534661176,hla_b_08_01
2.3053455653835333,hla_a_01_01
2.294881917049088,hla_a_02_04
2.1795915372186534,hla_a_03_01
2.157740178099448,hla_b_44_03
2.1525219430859064,hla_b_44_02
2.077020605233727,hla_b_57_03
2.0429661861088952,hla_b_51_01
1.7897458964153172,hla_b_58_01
1.7115810844416421,hla_b_27_01
1.6061292518763224,hla_c_03_04
1.5556319567973627,hla_c_06_02
1.4628452154628262,hla_a_11_01
1.3557355061484127,hla_b_40_01
1.3192622176683457,hla_b_27_02
1.3036075126277211,hla_b_15_02
1.3026562718700443,hla_c_08_02
1.2964052611767392,hla_b_46_01
1.251696945565927,hla_c_04_01
1.2070701648772015,hla_a_02_03
1.1578774285516273,hla_c_16_01
1.1269485147734484,hla_c_01_02
1.120806217309592,hla_b_35_01
1.1183601696469945,hla_b_27_07
1.0365534644867853,hla_a_68_02
0.976136087220624,hla_b_27_08
0.9367003632380779,hla_c_14_02
0.92533983076068,hla_c_15_02
0.8662813688626286,hla_c_02_02
0.8444571880507854,hla_c_03_03
0.7837136710962778,hla_c_07_02
0.7749894344330129,hla_b_27_04
0.7518335165604222,hla_b_27_06
0.7484634064475099,hla_a_31_01"""

alleles = []

percentages = 0
for row in csv.split("\n"):
    percentage, allele = row.split(",")
    print (percentage, allele)
    alleles.append(allele)
    percentages += float(percentage)

print (len(alleles))
print (percentages)
print (sorted(alleles))